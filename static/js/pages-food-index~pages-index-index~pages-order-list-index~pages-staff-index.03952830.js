(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-food-index~pages-index-index~pages-order-list-index~pages-staff-index"],{"089d":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visibleSync?n("v-uni-view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":t.showDrawer},on:{touchmove:function(e){e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[n("v-uni-view",{staticClass:"uni-drawer__mask",class:{"uni-drawer__mask--visible":t.showDrawer&&t.mask},on:{touchmove:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"uni-drawer__content",class:{"uni-drawer--right":t.rightMode,"uni-drawer--left":!t.rightMode,"uni-drawer__content--visible":t.showDrawer}},[t._t("default")],2)],1):t._e()},r=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a})},"1afc":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-drawer[data-v-63e9b648]{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:999}.uni-drawer__content[data-v-63e9b648]{display:block;position:absolute;top:0;width:70%;bottom:0;background-color:#fff;-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease;overflow-y:scroll}.uni-drawer--left[data-v-63e9b648]{left:0;-webkit-transform:translateX(-70%);transform:translateX(-70%)}.uni-drawer--right[data-v-63e9b648]{right:0;-webkit-transform:translateX(70%);transform:translateX(70%)}.uni-drawer__content--visible[data-v-63e9b648]{-webkit-transform:translateX(0);transform:translateX(0)}.uni-drawer__mask[data-v-63e9b648]{display:block;opacity:0;position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.4);-webkit-transition:opacity .3s;transition:opacity .3s}.uni-drawer__mask--visible[data-v-63e9b648]{display:block;opacity:1}',""])},"44d2":function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("cebc")),r=a(n("44e1")),s=a(n("5e7f")),o={components:{uniDrawer:r.default,upload:s.default},data:function(){return{tabList:[{name:"大屏幕"},{name:"厨房端"},{name:"柜台端"},{name:"open time"},{name:"dashboard"}],menuList:[{name:"profile",handler:"showDrawer"},{name:"quick out",handler:"quickOut"},{name:"log out",handler:"logOut"}],userName:"gg",activeIndex:4,isShowMenu:!1,isSetting:!1,canClose:!0,drawerVisible:!1,drawerStatus:"setting",setting:{avatar:"",avatarErr:"",nickname:"",nicknameErr:"",pinCode:"",pinErr:""},shopInfo:{},restaurantInfo:{}}},watch:{"setting.nickname":function(){this.setting.nicknameErr=""},"setting.pinCode":function(){this.setting.pinErr=""},"setting.avatar":function(){this.setting.avatarErr=""}},beforeUpdate:function(){this.initData()},mounted:function(){this.initData(),this.$nextTick(function(){this.setting=(0,i.default)({},this.setting,this.shopInfo),this.shopInfo.pinCode||(this.canClose=!1,this.drawerVisible=!0)})},methods:{initData:function(){this.shopInfo=uni.getStorageSync("shopInfo"),this.restaurantInfo=uni.getStorageSync("restaurantInfo")},updateProfile:function(){var t=this,e=this.setting;this.validateSetting()&&this.$postHttp(this.$API.updateProfile,{nickName:e.nickname,pinCode:e.pinCode,avatar:e.avatar}).then(function(n){if(1==n.status){var a=(0,i.default)({},t.shopInfo,{pinCode:e.pinCode,nickname:e.nickname,avatar:e.avatar});uni.setStorage({key:"shopInfo",data:a}),t.closeDrawer()}else uni.showToast({icon:"none",title:"设置失败，请稍后再试"})})},validateSetting:function(){var t=this.setting;if(t.nickname)if(t.pinCode)if(t.pinCode.length<6)this.setting.pinErr="pin code must be 6 letters";else{if(t.avatar)return!0;this.setting.avatarErr="avatar cannot be empty"}else this.setting.pinErr="pin code cannot be empty";else this.setting.nicknameErr="nickname cannot be empty"},changeAvatar:function(t){t.url&&(this.setting.avatar=t.url)},changeTab:function(t){var e=t.currentTarget.dataset.index;this.activeIndex=e},showMenu:function(){this.isShowMenu=!this.isShowMenu},chooseMenu:function(t){var e=t.currentTarget.dataset.handler;e&&this[e]()},quickOut:function(){console.log("quick out");var t=getCurrentPages(),e=t[t.length-1].route;uni.redirectTo({url:"/pages/pin-login/index?beforePage="+e})},logOut:function(){uni.removeStorageSync("token"),uni.removeStorageSync("shopInfo"),uni.reLaunch({url:"/pages/login/index"})},showDrawer:function(){this.canClose=!0;var t=uni.getStorageSync("shopInfo");this.setting=(0,i.default)({},this.setting,t),this.drawerVisible=!0},closeDrawer:function(){this.drawerVisible=!1,this.$refs.drawer.forceClose()}}};e.default=o},"44e1":function(t,e,n){"use strict";n.r(e);var a=n("089d"),i=n("c53c");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("b6d9");var s,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"63e9b648",null,!1,a["a"],s);e["default"]=c.exports},4747:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniDrawer",props:{visible:{type:Boolean,default:!1},mode:{type:String,default:""},mask:{type:Boolean,default:!0},canClose:{type:Boolean,default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null}},watch:{visible:function(t){t?this.open():this.close()}},created:function(){var t=this;this.visibleSync=this.visible,setTimeout(function(){t.showDrawer=t.visible},100),this.rightMode="right"===this.mode},methods:{close:function(){this.canClose&&(this._change("showDrawer","visibleSync",!1),this.$emit("closeDrawer"))},forceClose:function(){this._change("showDrawer","visibleSync",!1)},open:function(){this._change("visibleSync","showDrawer",!0)},_change:function(t,e,n){var a=this;this[t]=n,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout(function(){a[e]=n,a.$emit(n?"open":"close")},n?50:300)}}};e.default=a},"55f6":function(t,e,n){"use strict";var a=n("ad9b"),i=n.n(a);i.a},"5e7f":function(t,e,n){"use strict";n.r(e);var a=n("f223"),i=n("e54e");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("9bee");var s,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"2f52ddc6",null,!1,a["a"],s);e["default"]=c.exports},"7a47":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.header-wrap[data-v-8c4dbe4e]{margin:4vw 0}.header-avatar[data-v-8c4dbe4e]{width:6.7vw;height:6.7vw;border-radius:50%}.tab-list[data-v-8c4dbe4e]{padding:1vw;border:1px solid #ddd;font-size:1.9vw;margin:0 1.3vw;border-radius:10px}.active[data-v-8c4dbe4e]{background-color:#4cd964;color:#fff}.user-info[data-v-8c4dbe4e]{position:relative}.menu-list[data-v-8c4dbe4e]{width:13.3vw;background-color:#fff;border:1px solid #ddd;position:absolute;bottom:-17.3vw;right:.7vw;z-index:1}.menu-list-item[data-v-8c4dbe4e]{width:100%;height:5.3vw;line-height:5.3vw;text-align:center;border-bottom:1px solid #ddd}.upload-avatar-wrap[data-v-8c4dbe4e]{max-width:10vw;margin:3vw 0;text-align:center}',""])},"9bee":function(t,e,n){"use strict";var a=n("a3d6"),i=n.n(a);i.a},"9e40":function(t,e,n){var a=n("1afc");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("e09be38a",a,!0,{sourceMap:!1,shadowMode:!1})},a3d6:function(t,e,n){var a=n("ecd1");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("570a866e",a,!0,{sourceMap:!1,shadowMode:!1})},aab1:function(t,e,n){"use strict";n.r(e);var a=n("e79c"),i=n("dc68");for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);n("55f6");var s,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"8c4dbe4e",null,!1,a["a"],s);e["default"]=c.exports},ad9b:function(t,e,n){var a=n("7a47");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("0f777eee",a,!0,{sourceMap:!1,shadowMode:!1})},b06b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={data:function(){return{imageList:[],uploadLength:1}},props:{count:{type:Number,default:1},sizeType:{type:Array,default:function(){return["compress"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},fileType:{type:String,default:"oss.com/avatar"},authorId:{type:String,default:""}},methods:{upload:function(){var t=this,e=this.count,n=(this.sizeType,this.sourceType,this.fileType);this.authorId;uni.chooseImage({count:e,sizeType:["compressed"],sourceType:["album"],success:function(e){var a=e.tempFilePaths;t.uploadLength=a.length,a.map(function(e){var a=e,i=a.lastIndexOf("/"),r=a.substr(i+1);-1==r.indexOf(".")&&(r+=".png"),t.$postHttp(t.$API.getPolicy,{fileName:r,maxSize:10485760,filePath:"macaron",fileType:n,dataType:"json"}).then(function(e){t.post(e,a)})})}})},post:function(t,e){var n=this;uni.uploadFile({url:t.ossHost,name:"file",filePath:e,formData:{ossAccessKeyId:t.ossAccessKeyId,policy:t.policy,signature:t.signature,key:t.key,success_action_status:"200",fileType:t.fileType},success:function(e){n.save(t.id);var a={url:t.url,id:t.id,name:t.fileName};n.count>1?(n.imageList.push(a),n.imageList.length==n.uploadLength&&n.$emit("uploadOk",n.imageList)):n.$emit("uploadOk",a)},fail:function(t){console.log(t),uni.showToast({icon:"none",url:"上传失败，请稍后再试"})}})},save:function(t){this.$postHttp(this.$API.saveFileToDb,{id:t,dataType:"json"}).then(function(t){console.log(t)})}}};e.default=a},b6d9:function(t,e,n){"use strict";var a=n("9e40"),i=n.n(a);i.a},c53c:function(t,e,n){"use strict";n.r(e);var a=n("4747"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},dc68:function(t,e,n){"use strict";n.r(e);var a=n("44d2"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},e54e:function(t,e,n){"use strict";n.r(e);var a=n("b06b"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);e["default"]=i.a},e79c:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"flex flex-between header-wrap"},[n("v-uni-image",{staticClass:"logo",attrs:{src:t.restaurantInfo.logo}}),n("v-uni-view",{staticClass:"flex"},t._l(t.tabList,function(e,a){return n("v-uni-text",{key:a,staticClass:"tab-list",class:t.activeIndex==a?"active":"",attrs:{"data-index":a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab.apply(void 0,arguments)}}},[t._v(t._s(e.name))])}),1),n("v-uni-view",{staticClass:"flex flex-column flex-center user-info",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMenu.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"header-avatar",attrs:{src:t.shopInfo.avatar}}),n("v-uni-text",[t._v(t._s(t.shopInfo.nickname))]),t.isShowMenu?n("v-uni-view",{staticClass:"menu-list"},t._l(t.menuList,function(e,a){return n("v-uni-view",{key:a},[n("v-uni-view",{staticClass:"menu-list-item",attrs:{"data-handler":e.handler},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseMenu.apply(void 0,arguments)}}},[t._v(t._s(e.name))])],1)}),1):t._e()],1)],1),t.drawerVisible?n("uni-drawer",{ref:"drawer",attrs:{visible:t.drawerVisible,mode:"right",canClose:t.canClose},on:{closeDrawer:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDrawer.apply(void 0,arguments)}}},["setting"==t.drawerStatus?n("v-uni-view",{staticClass:"drawer-content"},[n("v-uni-view",{staticStyle:{padding:"30rpx"}},[t._v("hello "+t._s(t.shopInfo.username)+", please complete your profile first")]),n("v-uni-view",[n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"Nickname",maxlength:"20"},model:{value:t.setting.nickname,callback:function(e){t.$set(t.setting,"nickname",e)},expression:"setting.nickname"}})],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.nicknameErr))])],1),n("v-uni-view",[n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"Pin code",type:"number",password:"true",maxlength:"6"},model:{value:t.setting.pinCode,callback:function(e){t.$set(t.setting,"pinCode",e)},expression:"setting.pinCode"}})],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.pinErr))])],1),n("v-uni-view",[n("upload",{on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAvatar.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"upload-avatar-wrap"},[t.setting.avatar?n("v-uni-image",{staticClass:"avatar",attrs:{src:t.setting.avatar}}):n("v-uni-view",{staticClass:"avatar"}),n("v-uni-text",[t._v("change avatar")])],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.avatarErr))])],1)],1),n("v-uni-text",{staticClass:"btn btn-primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateProfile.apply(void 0,arguments)}}},[t._v("confirm")])],1):t._e()],1):t._e()],1)},r=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a})},ecd1:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-upload-wrap[data-v-2f52ddc6]{width:-webkit-max-content;width:max-content}',""])},f223:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-upload-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[t._t("default")],2)},r=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return a})}}]);