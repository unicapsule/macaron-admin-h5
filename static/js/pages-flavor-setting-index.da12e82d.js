(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flavor-setting-index"],{"5e7f":function(t,a,n){"use strict";n.r(a);var i=n("f223"),e=n("e54e");for(var o in e)"default"!==o&&function(t){n.d(a,t,function(){return e[t]})}(o);n("9bee");var s,r=n("f0c5"),u=Object(r["a"])(e["default"],i["b"],i["c"],!1,null,"2f52ddc6",null,!1,i["a"],s);a["default"]=u.exports},"77e8":function(t,a,n){"use strict";var i,e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("v-uni-view",{staticClass:"wrap"},[n("v-uni-view",[t._v("Add new 调味与配菜")]),n("v-uni-view",{staticClass:"content-area flex flex-between"},[n("upload",{on:{uploadOk:function(a){arguments[0]=a=t.$handleEvent(a),t.uploadOk.apply(void 0,arguments)}}},[t.imageInfo[t.flag].url?n("v-uni-image",{staticClass:"upload-img-wrap",attrs:{src:t.imageInfo[t.flag].url,mode:"widthFix"}}):n("v-uni-view",{staticClass:"upload-wrap"},[n("v-uni-text",[t._v("+")])],1)],1),n("v-uni-view",{staticClass:"flex flex-column content-info"},[n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"name",maxlength:"30"},model:{value:t.infoMap[t.flag].name,callback:function(a){t.$set(t.infoMap[t.flag],"name",a)},expression:"infoMap[flag].name"}})],1),n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"简单描述",maxlength:"200"},model:{value:t.infoMap[t.flag].description,callback:function(a){t.$set(t.infoMap[t.flag],"description",a)},expression:"infoMap[flag].description"}})],1),n("v-uni-view",{staticClass:"radio-wrap"},[n("v-uni-radio-group",{on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.radioChange.apply(void 0,arguments)}}},[n("v-uni-label",{staticClass:"radio"},[n("v-uni-radio",{staticClass:"radio-item",attrs:{value:"flavor",checked:"flavor"===t.flag}}),t._v("调味")],1),n("v-uni-label",{staticClass:"radio"},[n("v-uni-radio",{staticClass:"radio-item",attrs:{value:"dish",checked:"dish"===t.flag}}),t._v("配菜")],1)],1)],1)],1)],1),n("v-uni-view",{staticClass:"btn-wrap"},["dish"==t.flag?n("v-uni-text",{staticClass:"btn btn-primary",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.next.apply(void 0,arguments)}}},[t._v("next")]):n("v-uni-text",{staticClass:"btn btn-primary",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirm.apply(void 0,arguments)}}},[t._v("save")])],1),n("uni-notify",{ref:"notify"})],1)},o=[];n.d(a,"b",function(){return e}),n.d(a,"c",function(){return o}),n.d(a,"a",function(){return i})},"7a37":function(t,a,n){"use strict";n.r(a);var i=n("77e8"),e=n("fa3b");for(var o in e)"default"!==o&&function(t){n.d(a,t,function(){return e[t]})}(o);n("c89f");var s,r=n("f0c5"),u=Object(r["a"])(e["default"],i["b"],i["c"],!1,null,"50e03830",null,!1,i["a"],s);a["default"]=u.exports},"9bee":function(t,a,n){"use strict";var i=n("a3d6"),e=n.n(i);e.a},a3d6:function(t,a,n){var i=n("ecd1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var e=n("4f06").default;e("570a866e",i,!0,{sourceMap:!1,shadowMode:!1})},b06b:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,n("c5f6");var i={data:function(){return{imageList:[],uploadLength:1}},props:{count:{type:Number,default:1},sizeType:{type:Array,default:function(){return["compress"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},fileType:{type:String,default:"oss.com/avatar"},authorId:{type:String,default:""}},methods:{upload:function(){var t=this,a=this.count,n=(this.sizeType,this.sourceType,this.fileType);this.authorId;uni.chooseImage({count:a,sizeType:["compressed"],sourceType:["album"],success:function(a){var i=a.tempFilePaths;t.uploadLength=i.length,i.map(function(a){var i=a,e=i.lastIndexOf("/"),o=i.substr(e+1);-1==o.indexOf(".")&&(o+=".png"),t.$postHttp(t.$API.getPolicy,{fileName:o,maxSize:10485760,filePath:"macaron",fileType:n,dataType:"json"}).then(function(a){t.post(a,i)})})}})},post:function(t,a){var n=this;uni.uploadFile({url:t.ossHost,name:"file",filePath:a,formData:{ossAccessKeyId:t.ossAccessKeyId,policy:t.policy,signature:t.signature,key:t.key,success_action_status:"200",fileType:t.fileType},success:function(a){n.save(t.id);var i={url:t.url,id:t.id,name:t.fileName};n.count>1?(n.imageList.push(i),n.imageList.length==n.uploadLength&&n.$emit("uploadOk",n.imageList)):n.$emit("uploadOk",i)},fail:function(t){console.log(t),uni.showToast({icon:"none",url:"上传失败，请稍后再试"})}})},save:function(t){this.$postHttp(this.$API.saveFileToDb,{id:t,dataType:"json"}).then(function(t){console.log(t)})}}};a.default=i},b5bc:function(t,a,n){a=t.exports=n("2350")(!1),a.push([t.i,".upload-img-wrap[data-v-50e03830],.upload-wrap[data-v-50e03830]{width:26.7vw;height:20vw;line-height:20vw;text-align:center;background-color:#ddd;border-radius:10px}.upload-img-wrap[data-v-50e03830]{background-color:#fff}.content-area[data-v-50e03830]{margin-top:2.7vw}.content-info[data-v-50e03830]{width:40vw}.radio-wrap[data-v-50e03830]{margin-left:2vw;margin-top:1.3vw}.radio[data-v-50e03830]{margin-right:1.3vw}.btn-wrap[data-v-50e03830]{text-align:right;margin-top:20vw}",""])},c746:function(t,a,n){var i=n("b5bc");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var e=n("4f06").default;e("636d9f6f",i,!0,{sourceMap:!1,shadowMode:!1})},c89f:function(t,a,n){"use strict";var i=n("c746"),e=n.n(i);e.a},e54e:function(t,a,n){"use strict";n.r(a);var i=n("b06b"),e=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(a,t,function(){return i[t]})}(o);a["default"]=e.a},ecd1:function(t,a,n){a=t.exports=n("2350")(!1),a.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-upload-wrap[data-v-2f52ddc6]{width:-webkit-max-content;width:max-content}',""])},f223:function(t,a,n){"use strict";var i,e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("v-uni-view",{staticClass:"uni-upload-wrap",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.upload.apply(void 0,arguments)}}},[t._t("default")],2)},o=[];n.d(a,"b",function(){return e}),n.d(a,"c",function(){return o}),n.d(a,"a",function(){return i})},f857:function(t,a,n){"use strict";var i=n("288e");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e=i(n("f499")),o=i(n("5e7f")),s={components:{Upload:o.default},data:function(){return{imageInfo:{flavor:{},dish:{}},infoMap:{flavor:{name:"",description:""},dish:{name:"",description:""}},flag:"flavor"}},onLoad:function(){this.initData()},methods:{initData:function(){this.imageInfo[this.flag]={},this.infoMap[this.flag]={name:"",description:""}},uploadOk:function(t){console.log(t),this.imageInfo[this.flag]=t},radioChange:function(t){this.flag=t.detail.value},validate:function(){return!(!this.infoMap[this.flag].name||!this.imageInfo[this.flag].url)||(this.$notify({type:"error",title:"请添加图片和名称",button:[],callback:function(){console.log("login error")}}),!1)},confirm:function(){var t=this;this.validate()&&this.$postHttp(this.$API.addFlavor,{name:this.infoMap[this.flag].name,image:this.imageInfo[this.flag].url,describe:this.infoMap[this.flag].description}).then(function(a){1==a.status?(uni.showToast({icon:"none",title:"添加成功"}),t.initData()):uni.showToast({icon:"none",title:"添加失败，请稍后再试"})})},next:function(){if(this.validate()){var t=(0,e.default)({name:this.infoMap[this.flag].name,image:this.imageInfo[this.flag].url,describe:this.infoMap[this.flag].description});uni.navigateTo({url:"/pages/dish-setting/index?pam="+t})}},cancel:function(){uni.navigateBack({delta:1})}}};a.default=s},fa3b:function(t,a,n){"use strict";n.r(a);var i=n("f857"),e=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(a,t,function(){return i[t]})}(o);a["default"]=e.a}}]);