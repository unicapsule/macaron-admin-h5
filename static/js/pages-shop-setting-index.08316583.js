(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-setting-index"],{"445a":function(t,e,n){var i=n("5c6d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("39c510c8",i,!0,{sourceMap:!1,shadowMode:!1})},"5c6d":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-min[data-v-7a16b802]{min-width:30vw}.image-list[data-v-7a16b802]{width:15vw;height:15vw}.image-list-item[data-v-7a16b802]{width:15vw;height:15vw;margin-right:2vw}.image-list-item[data-v-7a16b802]:last-child{margin-right:0}.upload-area[data-v-7a16b802]{padding:5vw;max-width:5vw;background-color:#ddd;font-size:20px;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:2vw}.w100[data-v-7a16b802]{width:100%}.radio-wrap[data-v-7a16b802]{margin:1.3vw}.radio-wrap .radio[data-v-7a16b802]{margin:1vw}.image-wrap[data-v-7a16b802]{min-width:30vw}',""])},"5e7f":function(t,e,n){"use strict";n.r(e);var i=n("f223"),a=n("e54e");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("9bee");var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"2f52ddc6",null,!1,i["a"],o);e["default"]=u.exports},6014:function(t,e,n){"use strict";var i=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("cebc"));n("a481");var s=i(n("5e7f")),o={components:{Upload:s.default},data:function(){return{defaultBaseUrl:"https://domain.com/shop/",infoList:{name:"",announcement:"",address:"",category:"",priceLevel:"",shopId:"11",logo:"",images:[]},shopLoginAddress:"",priceList:["$","$$","$$$"],categoryList:[],pickIndex:0,addressList:[],restaurantInfo:{}}},onLoad:function(t){this.restaurantInfo=uni.getStorageSync("restaurantInfo");var e=this.restaurantInfo,n=e.name,i=e.announcement,a=e.address,s=e.category,o=e.priceLevel,l=e.shopId,u=e.logo,r=e.image,c=l.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});this.infoList={name:n,announcement:i,address:a,category:s,priceLevel:o,shopId:l,logo:u,images:r},this.getTasteTypesList(),this.shopLoginAddress=this.defaultBaseUrl+c},methods:{changeShopAddress:function(t){var e=t.detail.value;if(e.length<=24)this.shopLoginAddress=this.defaultBaseUrl;else{var n=e.substring(24);/^[0-9a-zA-Z-]{1,20}$/.test(n)||(uni.showToast({icon:"none",title:"address may only contain a-Z, 0-9, - "}),this.shopLoginAddress=this.defaultBaseUrl)}},getTasteTypesList:function(){var t=this;this.$getHttp(this.$API.getTasteTypesList).then(function(e){1==e.status&&e.data.map(function(e){t.categoryList.push(e.name)})})},changeCategory:function(t){this.infoList.category=t.newVal},getAddress:function(t){var e=this;this.$debounce.do({key:"getAddress",time:1500,success:function(n){e.$postHttp(e.$API.autocomplete,{input:t,type:"cities"}).then(function(t){e.addressList=[],t.data.map(function(t){e.addressList.push(t.description)})})}})},changeAddressInput:function(t){var e=t.detail.value;e?this.getAddress(e):this.addressList=[]},changeAddressValue:function(t){this.infoList.address=t.newVal},logoUpload:function(t){this.infoList.logo=t.url},galleryUpload:function(t){var e=this;t.map(function(t){e.infoList.images.push(t.url)})},validateSetting:function(){var t=this.infoList,e=t.name,n=t.category,i=t.logo;return e?n?!!i||(uni.showToast({icon:"none",title:"logo may not be null"}),!1):(uni.showToast({icon:"none",title:"category may not be null"}),!1):(uni.showToast({icon:"none",title:"name may not be null"}),!1)},updateSetting:function(){var t=this;this.validateSetting()&&this.$postHttp(this.$API.updateRestaurant,{data:(0,a.default)({},this.infoList),dataType:"json"}).then(function(e){1==e.status&&(uni.showToast({icon:"none",title:"update success"}),uni.setStorageSync("restaurantInfo",(0,a.default)({},t.restaurantInfo,t.infoList)),t.back())})},back:function(){uni.navigateBack({delta:1})},navTo:function(){uni.navigateTo({url:"/pages/qrcode/index"})}}};e.default=o},"9bee":function(t,e,n){"use strict";var i=n("a3d6"),a=n.n(i);a.a},a3d6:function(t,e,n){var i=n("ecd1");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("570a866e",i,!0,{sourceMap:!1,shadowMode:!1})},b06b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var i={data:function(){return{imageList:[],uploadLength:1}},props:{count:{type:Number,default:1},sizeType:{type:Array,default:function(){return["compress"]}},sourceType:{type:Array,default:function(){return["album","camera"]}},fileType:{type:String,default:"oss.com/avatar"},authorId:{type:String,default:""}},methods:{upload:function(){var t=this,e=this.count,n=(this.sizeType,this.sourceType,this.fileType);this.authorId;uni.chooseImage({count:e,sizeType:["compressed"],sourceType:["album"],success:function(e){var i=e.tempFilePaths;t.uploadLength=i.length,i.map(function(e){var i=e,a=i.lastIndexOf("/"),s=i.substr(a+1);-1==s.indexOf(".")&&(s+=".png"),t.$postHttp(t.$API.getPolicy,{fileName:s,maxSize:10485760,filePath:"macaron",fileType:n,dataType:"json"}).then(function(e){t.post(e,i)})})}})},post:function(t,e){var n=this;uni.uploadFile({url:t.ossHost,name:"file",filePath:e,formData:{ossAccessKeyId:t.ossAccessKeyId,policy:t.policy,signature:t.signature,key:t.key,success_action_status:"200",fileType:t.fileType},success:function(e){n.save(t.id);var i={url:t.url,id:t.id,name:t.fileName};n.count>1?(n.imageList.push(i),n.imageList.length==n.uploadLength&&n.$emit("uploadOk",n.imageList)):n.$emit("uploadOk",i)},fail:function(t){console.log(t),uni.showToast({icon:"none",url:"上传失败，请稍后再试"})}})},save:function(t){this.$postHttp(this.$API.saveFileToDb,{id:t,dataType:"json"}).then(function(t){console.log(t)})}}};e.default=i},ccfd:function(t,e,n){"use strict";n.r(e);var i=n("ee18"),a=n("e86b");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("d62c");var o,l=n("f0c5"),u=Object(l["a"])(a["default"],i["b"],i["c"],!1,null,"7a16b802",null,!1,i["a"],o);e["default"]=u.exports},d62c:function(t,e,n){"use strict";var i=n("445a"),a=n.n(i);a.a},e54e:function(t,e,n){"use strict";n.r(e);var i=n("b06b"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},e86b:function(t,e,n){"use strict";n.r(e);var i=n("6014"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);e["default"]=a.a},ecd1:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-upload-wrap[data-v-2f52ddc6]{width:-webkit-max-content;width:max-content}',""])},ee18:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"wrap flex flex-between"},[n("v-uni-view",[n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("店铺名称")]),n("v-uni-view",{staticClass:"input-wrap input-min"},[n("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"name",maxlength:"40"},model:{value:t.infoList.name,callback:function(e){t.$set(t.infoList,"name",e)},expression:"infoList.name"}})],1)],1),n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("店铺简介")]),n("v-uni-textarea",{staticClass:"textarea",attrs:{type:"text",placeholder:"announcement",maxlength:"600"},model:{value:t.infoList.announcement,callback:function(e){t.$set(t.infoList,"announcement",e)},expression:"infoList.announcement"}})],1),n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("店铺地址")]),n("uni-select",{staticClass:"category-picker-view input-min",attrs:{isCanInput:!0,list:t.addressList,clearable:!1,showItemNum:5,style_Container:"font-size: 16px;",initValue:t.infoList.address,selectHideType:"hideAll",debounce:1500},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAddressInput.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAddressValue.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("口味类型")]),n("uni-select",{staticClass:"category-picker-view input-min",attrs:{list:t.categoryList,clearable:!1,showItemNum:5,style_Container:"font-size: 16px;",initValue:t.infoList.category,selectHideType:"hideAll"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCategory.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("平均价格")]),n("v-uni-radio-group",{staticClass:"radio-wrap",on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.orderChange.apply(void 0,arguments)}}},t._l(t.priceList,function(e,i){return n("v-uni-label",{key:i,staticClass:"radio"},[n("v-uni-radio",{staticClass:"radio-item",attrs:{value:e.value,checked:t.infoList.priceLevel==i}}),t._v(t._s(e))],1)}),1)],1),n("v-uni-view",{staticClass:"flex align-center"},[n("v-uni-label",[t._v("店铺登录地址")]),n("v-uni-view",{staticClass:"input-wrap input-min"},[n("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:"name",maxlength:"45"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeShopAddress.apply(void 0,arguments)}},model:{value:t.shopLoginAddress,callback:function(e){t.shopLoginAddress=e},expression:"shopLoginAddress"}})],1)],1)],1),n("v-uni-view",{staticClass:"image-wrap"},[n("v-uni-view",{staticClass:"flex flex-column"},[n("v-uni-text",[t._v("logo")]),t.infoList.logo?n("v-uni-image",{staticClass:"logo",attrs:{src:t.infoList.logo}}):n("v-uni-view",{staticClass:"upload-area"},[t._v("+")]),n("upload",{on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.logoUpload.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"btn"},[t._v(t._s(t.infoList.logo?"replace ":"upload ")+"logo")])],1)],1),n("v-uni-view",{staticClass:"flex flex-column"},[n("v-uni-text",[t._v("gallery")]),t.infoList.images.length>=3?n("v-uni-swiper",{staticStyle:{height:"15vw",width:"35vw"},attrs:{"next-margin":"20px","display-multiple-items":"2"}},[t._l(t.infoList.images,function(t,e){return[n("v-uni-swiper-item",[n("v-uni-image",{staticClass:"image-list",attrs:{src:t}})],1)]})],2):t._e(),t.infoList.images.length&&t.infoList.images.length<3?n("v-uni-view",t._l(t.infoList.images,function(t,e){return n("v-uni-image",{key:e,staticClass:"image-list-item",attrs:{src:t}})}),1):t._e(),t.infoList.images.length?t._e():n("v-uni-view",{staticClass:"upload-area"},[t._v("+")]),n("upload",{attrs:{count:5},on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.galleryUpload.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"btn"},[t._v(t._s(t.infoList.images.length?"replace ":"upload ")+"gallery")])],1)],1)],1),n("v-uni-view",{staticClass:"flex flex-between w100"},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-text",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo.apply(void 0,arguments)}}},[t._v("Qrcode management")]),n("v-uni-text",{staticClass:"btn"},[t._v("Advance setting")])],1),n("v-uni-view",{staticClass:"flex"},[n("v-uni-text",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t._v("Cancel")]),n("v-uni-text",{staticClass:"btn btn-primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateSetting.apply(void 0,arguments)}}},[t._v("Save")])],1)],1)],1)},s=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return i})},f223:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"uni-upload-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload.apply(void 0,arguments)}}},[t._t("default")],2)},s=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return i})}}]);