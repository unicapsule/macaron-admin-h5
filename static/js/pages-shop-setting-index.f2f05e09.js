(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-setting-index"],{"0930":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("c5f6");var a={data:function(){return{radios:[],currentValue:"",currentIndex:""}},props:{label:{type:String,default:""},radioList:{type:Array,default:function(){return[]}},initIndex:{type:Number,default:0}},watch:{radioList:{immediate:!0,handler:function(){this.radios=this.radioList,this.currentValue=this.radios[this.initIndex]}}},methods:{changeRadio:function(t){var e=t.currentTarget.dataset,n=e.index,a=e.value;this.currentValue=a,this.currentIndex=n},radioChange:function(t){this.$emit("change",t)}}};e.default=a},"174e":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.radio-group-wrap[data-v-34101592]{margin:1.3vw 0}.radio-wrap[data-v-34101592]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.radio-wrap .radio-label[data-v-34101592]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:4.9vw}.radio-wrap .radio-label[data-v-34101592]:last-child{margin-right:0}.radio-wrap .radio-label .label[data-v-34101592]{font-size:1.5vw;font-weight:700;color:#2e384d}.radio-wrap .radio[data-v-34101592]{width:1.6vw;height:1.5vw;border-radius:50%;background:#fff;border:1px solid rgba(128,151,177,.5);margin:1vw 1vw 1vw 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.radio-wrap .radio.checked[data-v-34101592]{background:#3cba92;border:1px solid #3cba92}.radio-wrap .radio.checked[data-v-34101592]:after{content:"";width:.8vw;height:.8vw;background-color:#fff;border-radius:50%}',""])},"4d27":function(t,e,n){"use strict";var a=n("9cd0"),i=n.n(a);i.a},6014:function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("cebc"));n("a481");var s=a(n("5e7f")),o=a(n("8c22")),r={components:{Upload:s.default,uniRadios:o.default},data:function(){return{defaultBaseUrl:"https://domain.com/shop/",infoList:{name:"",announcement:"",address:"",category:"",priceLevel:"",shopId:"11",logo:"",images:[]},shopLoginAddress:"",priceList:["$","$$","$$$"],categoryList:[],pickIndex:0,addressList:[],restaurantInfo:{},galleryUploadList:[],logoUploadList:[]}},onLoad:function(t){var e=this;this.restaurantInfo=uni.getStorageSync("restaurantInfo");var n=this.restaurantInfo,a=n.name,i=n.announcement,s=n.address,o=n.category,r=n.priceLevel,l=n.shopId,d=n.logo,c=n.image,u=l.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});this.infoList={name:a,announcement:i,address:s,category:o,priceLevel:r,shopId:l,logo:d,images:c},this.logoUploadList=[{url:d}],c.map(function(t){e.galleryUploadList.push({url:t})}),this.getTasteTypesList(),this.shopLoginAddress=this.defaultBaseUrl+u},methods:{openGalleryUPload:function(){this.$refs.gallery.openUpload()},changeShopAddress:function(t){var e=t.detail.value;if(e.length<=24)this.shopLoginAddress=this.defaultBaseUrl;else{var n=e.substring(24);/^[0-9a-zA-Z-]{1,20}$/.test(n)||(uni.showToast({icon:"none",title:"address may only contain a-Z, 0-9, - "}),this.shopLoginAddress=this.defaultBaseUrl)}},getTasteTypesList:function(){var t=this;this.$getHttp(this.$API.getTasteTypesList).then(function(e){1==e.status&&e.data.map(function(e){t.categoryList.push(e.name)})})},changeCategory:function(t){this.infoList.category=t.newVal},orderChange:function(t){this.infoList.priceLevel=t.detail.value},getAddress:function(t){var e=this;this.$debounce.do({key:"getAddress",time:1500,success:function(n){e.$postHttp(e.$API.autocomplete,{input:t,type:"cities"}).then(function(t){e.addressList=[],t.data.map(function(t){e.addressList.push(t.description)})})}})},changeAddressInput:function(t){var e=t.detail.value;e?this.getAddress(e):this.addressList=[]},changeAddressValue:function(t){this.infoList.address=t.newVal},logoUpload:function(t){this.infoList.logo=t.url,this.logoUploadList=[{url:t.url}]},galleryUpload:function(t){var e=this,n=[];t.map(function(t){e.infoList.images.push(t.url),n.push({url:t.url})}),this.galleryUploadList=n},validateSetting:function(){var t=this.infoList,e=t.name,n=t.category,a=t.logo;return e?n?!!a||(uni.showToast({icon:"none",title:"logo may not be null"}),!1):(uni.showToast({icon:"none",title:"category may not be null"}),!1):(uni.showToast({icon:"none",title:"name may not be null"}),!1)},updateSetting:function(){var t=this;this.validateSetting()&&this.$postHttp(this.$API.updateRestaurant,{data:(0,i.default)({},this.infoList),dataType:"json"}).then(function(e){1==e.status&&(uni.showToast({icon:"none",title:"update success"}),uni.setStorageSync("restaurantInfo",(0,i.default)({},t.restaurantInfo,t.infoList)),t.back())})},back:function(){uni.navigateBack({delta:1})},navTo:function(){uni.navigateTo({url:"/pages/qrcode/index"})}}};e.default=r},"64f7":function(t,e,n){var a=n("9bca");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("222993ce",a,!0,{sourceMap:!1,shadowMode:!1})},"8c22":function(t,e,n){"use strict";n.r(e);var a=n("f304"),i=n("f5b3");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("4d27");var o,r=n("f0c5"),l=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"34101592",null,!1,a["a"],o);e["default"]=l.exports},"91bb":function(t,e,n){"use strict";var a=n("64f7"),i=n.n(a);i.a},"9bca":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.input-min[data-v-64909857]{min-width:30vw}.image-list[data-v-64909857]{width:15vw;height:15vw}.image-list-item[data-v-64909857]{width:15vw;height:15vw;margin-right:2vw}.image-list-item[data-v-64909857]:last-child{margin-right:0}.upload-area[data-v-64909857]{padding:5vw;max-width:5vw;background-color:#ddd;font-size:20px;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border-radius:2vw}.gallery-upload-wrap[data-v-64909857]{margin-top:7.8vw}.border-line[data-v-64909857]{width:0;height:58.6vw;border-left:1px solid #e4e4e4;margin:0 4.9vw}.image-wrap[data-v-64909857]{min-width:30vw}.button-group[data-v-64909857]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:3.9vw}',""])},"9cd0":function(t,e,n){var a=n("174e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("5f9d57d6",a,!0,{sourceMap:!1,shadowMode:!1})},ccfd:function(t,e,n){"use strict";n.r(e);var a=n("d7c0"),i=n("e86b");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("91bb");var o,r=n("f0c5"),l=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"64909857",null,!1,a["a"],o);e["default"]=l.exports},d7c0:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-wrap"},[n("v-uni-view",{staticClass:"page-content-title content-title"},[t._v(t._s(t.$toUpperCase("Shop settings")))]),n("v-uni-view",{staticClass:"page-content"},[n("v-uni-view",{staticClass:"flex"},[n("v-uni-view",[n("uni-inputs",{attrs:{label:"店铺名称",placeholder:"name",maxlength:40,width:"37.2vw"},model:{value:t.infoList.name,callback:function(e){t.$set(t.infoList,"name",e)},expression:"infoList.name"}}),n("v-uni-view",{staticClass:"flex flex-column flex-start"},[n("v-uni-label",{staticClass:"input-label"},[t._v(t._s(t.$toUpperCase("店铺简介（max 600 characters）")))]),n("v-uni-textarea",{staticClass:"textarea",attrs:{type:"text",placeholder:"announcement",maxlength:"600"},model:{value:t.infoList.announcement,callback:function(e){t.$set(t.infoList,"announcement",e)},expression:"infoList.announcement"}})],1),n("uni-select",{attrs:{label:"店铺地址",isCanInput:!0,list:t.addressList,clearable:!1,showItemNum:5,style_Container:"font-size: 16px;width: 40.2vw;",initValue:t.infoList.address,selectHideType:"hideAll",debounce:1500},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAddressInput.apply(void 0,arguments)},change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAddressValue.apply(void 0,arguments)}}}),n("uni-select",{attrs:{label:"口味类型",list:t.categoryList,clearable:!1,showItemNum:5,style_Container:"font-size: 16px;width: 40.2vw;",initValue:t.infoList.category,selectHideType:"hideAll"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeCategory.apply(void 0,arguments)}}}),n("uni-radios",{attrs:{label:"平均价格",initIndex:1,radioList:t.priceList},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.orderChange.apply(void 0,arguments)}}}),n("uni-inputs",{attrs:{label:"店铺登录地址",placeholder:"name",maxlength:45,width:"37.2vw"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.changeShopAddress.apply(void 0,arguments)}},model:{value:t.shopLoginAddress,callback:function(e){t.shopLoginAddress=e},expression:"shopLoginAddress"}})],1),n("v-uni-view",{staticClass:"border-line"}),n("v-uni-view",{staticClass:"image-wrap"},[n("v-uni-view",{staticClass:"flex flex-column"},[n("v-uni-text",{staticClass:"input-label"},[t._v("LOGO")]),t.infoList.logo?n("v-uni-image",{staticClass:"upload-avatar-wrap mt20",attrs:{src:t.infoList.logo}}):n("v-uni-view",{staticClass:"upload-avatar-wrap mt20"}),n("uni-buttons",{staticClass:"mt20",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$openUpload()}}},[t._v(t._s(t.infoList.logo?"replace ":"upload ")+"logo")])],1),n("v-uni-view",{staticClass:"flex flex-column gallery-upload-wrap"},[n("v-uni-text",{staticClass:"input-label"},[t._v("GALLERY")]),t.infoList.images.length>=3?n("v-uni-swiper",{staticStyle:{height:"15vw",width:"35vw"},attrs:{"next-margin":"20px","display-multiple-items":"2"}},[t._l(t.infoList.images,function(t,e){return[n("v-uni-swiper-item",[n("v-uni-image",{staticClass:"image-list",attrs:{src:t}})],1)]})],2):t._e(),t.infoList.images.length&&t.infoList.images.length<3?n("v-uni-view",t._l(t.infoList.images,function(t,e){return n("v-uni-image",{key:e,staticClass:"image-list-item",attrs:{src:t}})}),1):t._e(),t.infoList.images.length?t._e():n("v-uni-view",{staticClass:"upload-avatar-wrap mt20"}),n("uni-buttons",{staticClass:"mt20",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openGalleryUPload.apply(void 0,arguments)}}},[t._v(t._s(t.infoList.images.length?"replace ":"upload ")+"gallery")])],1)],1)],1),n("v-uni-view",{staticClass:"button-group"},[n("v-uni-view",{staticClass:"flex"},[n("uni-buttons",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navTo.apply(void 0,arguments)}}},[t._v("Qrcode management")]),n("uni-buttons",{attrs:{type:"default"}},[t._v("Advance setting")])],1),n("v-uni-view",{staticClass:"flex"},[n("uni-buttons",{attrs:{type:"gray",width:"9.8vw"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[t._v("Cancel")]),n("uni-buttons",{attrs:{width:"9.8vw"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateSetting.apply(void 0,arguments)}}},[t._v("Save")])],1)],1)],1),n("upload",{ref:"upload",attrs:{lists:t.logoUploadList},on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.logoUpload.apply(void 0,arguments)}}}),n("upload",{ref:"gallery",attrs:{count:5,lists:t.galleryUploadList},on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.galleryUpload.apply(void 0,arguments)}}})],1)},s=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a})},e86b:function(t,e,n){"use strict";n.r(e);var a=n("6014"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},f304:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"radio-group-wrap"},[n("v-uni-label",{staticClass:"input-label"},[t._v(t._s(t.$toUpperCase(t.label)))]),n("v-uni-radio-group",{staticClass:"radio-wrap",on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}},[t._l(t.radios,function(e,a){return[n("v-uni-label",{key:a+"_0",staticClass:"radio-label",attrs:{"data-index":a,"data-value":e},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeRadio.apply(void 0,arguments)}}},[n("v-uni-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{value:e,checked:e==t.currentValue}}),n("v-uni-text",{staticClass:"radio",class:e==t.currentValue?"checked":""}),n("v-uni-text",{staticClass:"label"},[t._v(t._s(e))])],1)]})],2)],1)},s=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a})},f5b3:function(t,e,n){"use strict";n.r(e);var a=n("0930"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a}}]);