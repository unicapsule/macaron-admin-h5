(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-food-index~pages-index-index~pages-order-list-index~pages-staff-index"],{"089d":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.visibleSync?n("v-uni-view",{staticClass:"uni-drawer",class:{"uni-drawer--visible":t.showDrawer},on:{touchmove:function(e){e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[n("v-uni-view",{staticClass:"uni-drawer__mask",class:{"uni-drawer__mask--visible":t.showDrawer&&t.mask},on:{touchmove:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"uni-drawer__content",class:{"uni-drawer--right":t.rightMode,"uni-drawer--left":!t.rightMode,"uni-drawer__content--visible":t.showDrawer}},[t._t("default")],2)],1):t._e()},s=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a})},"0d3d":function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"page-header-wrap"},[n("v-uni-view",{staticClass:"flex flex-center"},[n("v-uni-image",{staticClass:"header-logo",attrs:{src:t.restaurantInfo.logo}}),n("v-uni-text",{staticClass:"header-name"},[t._v(t._s(t.restaurantInfo.name))])],1),n("v-uni-view",{staticClass:"flex flex-between align-center"},[n("v-uni-view",{staticClass:"tablist-wrap"},t._l(t.tabList,function(e,a){return n("v-uni-text",{key:a,staticClass:"tab-list",class:t.activeIndex==a?"active":"",attrs:{"data-index":a},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTab.apply(void 0,arguments)}}},[t._v(t._s(e.name))])}),1),n("v-uni-view",{staticClass:"flex flex-center user-info",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showMenu.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"header-avatar",attrs:{src:t.shopInfo.avatar}}),n("v-uni-text",{staticClass:"header-name"},[t._v(t._s(t.shopInfo.nickname))]),t.isShowMenu?n("v-uni-view",{staticClass:"menu-list box-shadow"},t._l(t.menuList,function(e,a){return n("v-uni-view",{key:a},[n("v-uni-view",{staticClass:"menu-list-item",attrs:{"data-handler":e.handler},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseMenu.apply(void 0,arguments)}}},[t._v(t._s(e.name))])],1)}),1):t._e()],1)],1)],1),t.drawerVisible?n("uni-drawer",{ref:"drawer",attrs:{visible:t.drawerVisible,mode:"right",canClose:t.canClose},on:{closeDrawer:function(e){arguments[0]=e=t.$handleEvent(e),t.closeDrawer.apply(void 0,arguments)}}},["setting"==t.drawerStatus?n("v-uni-view",{staticClass:"drawer-content"},[n("v-uni-view",{staticStyle:{padding:"30rpx"}},[t._v("hello "+t._s(t.shopInfo.username)+", please complete your profile first")]),n("v-uni-view",[n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"Nickname",maxlength:"20"},model:{value:t.setting.nickname,callback:function(e){t.$set(t.setting,"nickname",e)},expression:"setting.nickname"}})],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.nicknameErr))])],1),n("v-uni-view",[n("v-uni-view",{staticClass:"input-wrap"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"Pin code",type:"number",password:"true",maxlength:"6"},model:{value:t.setting.pinCode,callback:function(e){t.$set(t.setting,"pinCode",e)},expression:"setting.pinCode"}})],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.pinErr))])],1),n("v-uni-view",[n("v-uni-view",{staticClass:"upload-avatar-wrap",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.$openUpload()}}},[t.setting.avatar?n("v-uni-image",{staticClass:"avatar",attrs:{src:t.setting.avatar}}):n("v-uni-view",{staticClass:"avatar"}),n("v-uni-text",[t._v("change avatar")])],1),n("v-uni-text",{staticClass:"error-text"},[t._v(t._s(t.setting.avatarErr))])],1),n("v-uni-text",{staticClass:"btn btn-primary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateProfile.apply(void 0,arguments)}}},[t._v("confirm")])],1):t._e()],1):t._e(),n("upload",{ref:"upload",attrs:{lists:t.imageLists},on:{uploadOk:function(e){arguments[0]=e=t.$handleEvent(e),t.changeAvatar.apply(void 0,arguments)}}})],1)},s=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return s}),n.d(e,"a",function(){return a})},"1afc":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.uni-drawer[data-v-63e9b648]{display:block;position:fixed;top:0;left:0;right:0;bottom:0;overflow:hidden;z-index:999}.uni-drawer__content[data-v-63e9b648]{display:block;position:absolute;top:0;width:70%;bottom:0;background-color:#fff;-webkit-transition:-webkit-transform .3s ease;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease;overflow-y:scroll}.uni-drawer--left[data-v-63e9b648]{left:0;-webkit-transform:translateX(-70%);transform:translateX(-70%)}.uni-drawer--right[data-v-63e9b648]{right:0;-webkit-transform:translateX(70%);transform:translateX(70%)}.uni-drawer__content--visible[data-v-63e9b648]{-webkit-transform:translateX(0);transform:translateX(0)}.uni-drawer__mask[data-v-63e9b648]{display:block;opacity:0;position:absolute;top:0;left:0;bottom:0;right:0;background-color:rgba(0,0,0,.4);-webkit-transition:opacity .3s;transition:opacity .3s}.uni-drawer__mask--visible[data-v-63e9b648]{display:block;opacity:1}',""])},"44d2":function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("cebc")),s=a(n("44e1")),r=a(n("5e7f")),o={components:{uniDrawer:s.default,upload:r.default},data:function(){return{imageLists:[],tabList:[{name:"大屏幕"},{name:"厨房端"},{name:"收银台"},{name:"营业时间"},{name:"Dashboard"}],menuList:[{name:"Profile setting",handler:"showDrawer"},{name:"Quick lock",handler:"quickOut"},{name:"Log out",handler:"logOut"}],activeIndex:4,isShowMenu:!1,isSetting:!1,canClose:!0,drawerVisible:!1,drawerStatus:"setting",setting:{avatar:"",avatarErr:"",nickname:"",nicknameErr:"",pinCode:"",pinErr:""},shopInfo:{},restaurantInfo:{}}},watch:{"setting.nickname":function(){this.setting.nicknameErr=""},"setting.pinCode":function(){this.setting.pinErr=""},"setting.avatar":function(){this.setting.avatarErr=""}},beforeUpdate:function(){this.initData()},mounted:function(){this.initData(),this.$nextTick(function(){this.setting=(0,i.default)({},this.setting,this.shopInfo),this.setUploadImage(),this.shopInfo.hashedPinCode||(this.canClose=!1,this.drawerVisible=!0)})},methods:{initData:function(){this.shopInfo=uni.getStorageSync("shopInfo"),this.restaurantInfo=uni.getStorageSync("restaurantInfo")},setUploadImage:function(){this.imageLists=[{url:this.setting.avatar}]},updateProfile:function(){var t=this,e=this.setting;this.validateSetting()&&this.$postHttp(this.$API.updateProfile,{nickName:e.nickname,pinCode:e.pinCode,avatar:e.avatar}).then(function(n){if(1==n.status){var a=(0,i.default)({},t.shopInfo,{pinCode:e.pinCode,nickname:e.nickname,avatar:e.avatar});uni.setStorage({key:"shopInfo",data:a}),t.closeDrawer()}else uni.showToast({icon:"none",title:"设置失败，请稍后再试"})})},validateSetting:function(){var t=this.setting;if(t.nickname)if(t.pinCode)if(t.pinCode.length<6)this.setting.pinErr="pin code must be 6 letters";else{if(t.avatar)return!0;this.setting.avatarErr="avatar cannot be empty"}else this.setting.pinErr="pin code cannot be empty";else this.setting.nicknameErr="nickname cannot be empty"},changeAvatar:function(t){t.url&&(this.setting.avatar=t.url,this.setUploadImage())},changeTab:function(t){var e=t.currentTarget.dataset.index;this.activeIndex=e},showMenu:function(){this.isShowMenu=!this.isShowMenu},chooseMenu:function(t){var e=t.currentTarget.dataset.handler;e&&this[e]()},quickOut:function(){console.log("quick out");var t=getCurrentPages(),e=t[t.length-1].route;uni.redirectTo({url:"/pages/pin-login/index?beforePage="+e})},logOut:function(){uni.removeStorageSync("token"),uni.removeStorageSync("shopInfo"),uni.reLaunch({url:"/pages/login/index"})},showDrawer:function(){this.canClose=!0;var t=uni.getStorageSync("shopInfo");this.setting=(0,i.default)({},this.setting,t),this.drawerVisible=!0},closeDrawer:function(){this.drawerVisible=!1,this.$refs.drawer.forceClose()}}};e.default=o},"44e1":function(t,e,n){"use strict";n.r(e);var a=n("089d"),i=n("c53c");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("b6d9");var r,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"63e9b648",null,!1,a["a"],r);e["default"]=c.exports},4747:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"UniDrawer",props:{visible:{type:Boolean,default:!1},mode:{type:String,default:""},mask:{type:Boolean,default:!0},canClose:{type:Boolean,default:!0}},data:function(){return{visibleSync:!1,showDrawer:!1,rightMode:!1,watchTimer:null}},watch:{visible:function(t){t?this.open():this.close()}},created:function(){var t=this;this.visibleSync=this.visible,setTimeout(function(){t.showDrawer=t.visible},100),this.rightMode="right"===this.mode},methods:{close:function(){this.canClose&&(this._change("showDrawer","visibleSync",!1),this.$emit("closeDrawer"))},forceClose:function(){this._change("showDrawer","visibleSync",!1)},open:function(){this._change("visibleSync","showDrawer",!0)},_change:function(t,e,n){var a=this;this[t]=n,this.watchTimer&&clearTimeout(this.watchTimer),this.watchTimer=setTimeout(function(){a[e]=n,a.$emit(n?"open":"close")},n?50:300)}}};e.default=a},"574c":function(t,e,n){"use strict";var a=n("dd19"),i=n.n(a);i.a},6074:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.page-header-wrap[data-v-77a22760]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:2vw 0;width:100%;height:3.9vw;background:#fff;position:fixed;top:0}.header-logo[data-v-77a22760]{width:3.9vw;height:3.9vw;background-color:#e4e4e4;border:1px solid #2e384d;margin-left:2vw}.header-name[data-v-77a22760]{font-size:1.5vw;font-weight:700;margin-left:2.3vw;color:#2e384d}.header-avatar[data-v-77a22760]{width:3.9vw;height:3.9vw;border-radius:50%}.tab-list[data-v-77a22760]{font-size:1.3vw;color:#2e384d;margin-right:2.9vw}.active[data-v-77a22760]{color:#3cba92}.user-info[data-v-77a22760]{position:relative;margin-right:2vw}.tablist-wrap[data-v-77a22760]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:3vw}.menu-list[data-v-77a22760]{width:20.4vw;background:#fff;border-radius:.8vw;border:1px solid rgba(46,91,255,.08);position:absolute;bottom:-17.3vw;right:-1vw;z-index:1;color:#8798ad;font-size:1.5vw}.menu-list-item[data-v-77a22760]{padding:1.7vw;text-align:left;border-bottom:1px solid #e4e4e4}.upload-avatar-wrap[data-v-77a22760]{max-width:10vw;margin:3vw 0;text-align:center}',""])},"9e40":function(t,e,n){var a=n("1afc");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("e09be38a",a,!0,{sourceMap:!1,shadowMode:!1})},aab1:function(t,e,n){"use strict";n.r(e);var a=n("0d3d"),i=n("dc68");for(var s in i)"default"!==s&&function(t){n.d(e,t,function(){return i[t]})}(s);n("574c");var r,o=n("f0c5"),c=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"77a22760",null,!1,a["a"],r);e["default"]=c.exports},b6d9:function(t,e,n){"use strict";var a=n("9e40"),i=n.n(a);i.a},c53c:function(t,e,n){"use strict";n.r(e);var a=n("4747"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},dc68:function(t,e,n){"use strict";n.r(e);var a=n("44d2"),i=n.n(a);for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);e["default"]=i.a},dd19:function(t,e,n){var a=n("6074");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1e9683cd",a,!0,{sourceMap:!1,shadowMode:!1})}}]);