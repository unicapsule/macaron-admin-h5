(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flavor-setting-add-dish"],{"35c6":function(t,n,i){"use strict";var e=i("288e");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=e(i("cebc")),o=e(i("5e7f")),s=i("2f62"),c={components:{upload:o.default},data:function(){return{dishInfo:{name:"",count:0,calorie:0,describe:"",image:[{name:"",id:"",url:""}]},isUpdate:!1}},computed:(0,a.default)({},(0,s.mapState)(["shopDishEdit"])),onShow:function(){this.dishInfo=(0,a.default)({},this.dishInfo,this.shopDishEdit),this.isUpdate=!!this.dishInfo.id},methods:(0,a.default)({},(0,s.mapActions)(["updateShopGarnish"]),{uploadPhoto:function(t){this.dishInfo.image=[(0,a.default)({},t)]},validate:function(){return!(!this.dishInfo.name||!this.dishInfo.image[0].url)||(this.$notify({type:"error",title:"请添加图片和名称",button:[],callback:function(){console.log("login error")}}),!1)},confirm:function(){this.dishInfo.id?this.update():this.save()},update:function(){var t=this,n=this.dishInfo,i={garnishId:n.id,data:{name:n.name,describe:n.describe,image:n.image,count:n.count,calorie:n.calorie}};this.updateShopGarnish(i).then(function(n){n?uni.showToast({icon:"none",title:"更新成功",success:function(n){var i=setTimeout(function(){t.back(),clearTimeout(i)},2e3)}}):uni.showToast({icon:"none",title:"更新失败，请稍后再试"})})},save:function(){var t=this;this.validate()&&this.$postHttp(this.$API.addGarnish,(0,a.default)({},this.dishInfo,{dataType:"json"})).then(function(n){if(1==n.status){uni.showToast({icon:"none",title:"添加成功"});var i=setTimeout(function(){t.back(),clearTimeout(i)},2e3)}})},back:function(){uni.navigateBack({delta:1})}})};n.default=c},c331:function(t,n,i){"use strict";i.r(n);var e=i("e7c2"),a=i("c6a9");for(var o in a)"default"!==o&&function(t){i.d(n,t,function(){return a[t]})}(o);var s,c=i("f0c5"),u=Object(c["a"])(a["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],s);n["default"]=u.exports},c6a9:function(t,n,i){"use strict";i.r(n);var e=i("35c6"),a=i.n(e);for(var o in e)"default"!==o&&function(t){i.d(n,t,function(){return e[t]})}(o);n["default"]=a.a},e7c2:function(t,n,i){"use strict";var e,a=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",{staticClass:"page-wrap"},[i("v-uni-view",{staticClass:"page-content-title content-title"},[t._v(t._s(t.isUpdate?"UPDATE":"ADD")+" GARNISH")]),i("v-uni-view",{staticClass:"page-content"},[i("v-uni-view",[t.dishInfo.image[0].url?i("v-uni-image",{staticClass:"upload-avatar-wrap",attrs:{src:t.dishInfo.image[0].url,mode:"aspectFill"}}):i("v-uni-view",{staticClass:"upload-avatar-wrap"}),i("uni-buttons",{staticClass:"mt20 mb20",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.$openUpload()}}},[t._v("upload cover photo")]),i("uni-inputs",{attrs:{label:"* name",placeholder:"name",maxlength:30},model:{value:t.dishInfo.name,callback:function(n){t.$set(t.dishInfo,"name",n)},expression:"dishInfo.name"}}),i("uni-inputs",{attrs:{label:"库存（为0不计算库存）",type:"number"},model:{value:t.dishInfo.count,callback:function(n){t.$set(t.dishInfo,"count",n)},expression:"dishInfo.count"}}),i("uni-inputs",{attrs:{label:"热量",placeholder:"calorie",type:"number"},model:{value:t.dishInfo.calorie,callback:function(n){t.$set(t.dishInfo,"calorie",n)},expression:"dishInfo.calorie"}}),i("uni-inputs",{attrs:{label:"备注（不会显示给用户）",placeholder:"description",maxlength:100},model:{value:t.dishInfo.describe,callback:function(n){t.$set(t.dishInfo,"describe",n)},expression:"dishInfo.describe"}})],1),i("v-uni-view",{staticClass:"flex flex-end"},[i("uni-buttons",{attrs:{type:"gray",width:"9.8vw"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.back.apply(void 0,arguments)}}},[t._v("cancel")]),i("uni-buttons",{attrs:{width:"9.8vw"},on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.confirm.apply(void 0,arguments)}}},[t._v("save")])],1)],1),i("upload",{ref:"upload",attrs:{lists:[t.dishInfo.image[0]]},on:{uploadOk:function(n){arguments[0]=n=t.$handleEvent(n),t.uploadPhoto.apply(void 0,arguments)}}}),i("uni-notify",{ref:"notify"})],1)},o=[];i.d(n,"b",function(){return a}),i.d(n,"c",function(){return o}),i.d(n,"a",function(){return e})}}]);